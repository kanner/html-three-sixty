/*
	UIZE JAVASCRIPT FRAMEWORK 2010-08-30

	http://www.uize.com/reference/Uize.Node.html
	Available under MIT License or GNU General Public License -- http://www.uize.com/license.html
*/
Uize.module({name:'Uize.Node',builder:function(){var _a=function(){},_b,_c='string',_d='function',_e=true,_f=false,_g=null,_h=typeof navigator!='undefined',_i=_h?navigator:{userAgent:'',appName:''},_j=_i.userAgent.toLowerCase(),_k=_i.appName=='Microsoft Internet Explorer',_l=_j.indexOf('applewebkit')> -1,_m=_j.indexOf('gecko')> -1,_n=_j.indexOf('opera')> -1,_o=_m||_n,_p='hidden',_q=Uize.copyInto;var _r=_a._r=function(_s){_t.clientX=_s.clientX;_t.clientY=_s.clientY;_t.pageX=_s.pageX;_t.pageY=_s.pageY;};function _u(_v){var _w=document.getElementById(_v);return(!_k||(_w&&_w.id==_v))?_w:_g;}function _x(){return document[_l?'body':'documentElement'];}function _y(_z){var _A=(_z=_z+'').slice(_z.indexOf('(')+1,_z.indexOf(')'));return Function.apply({},(_A?_A.split(','):[]).concat(_z.slice(_z.indexOf('{')+1,_z.lastIndexOf('}'))));}function _B(_C){if(_C.charCodeAt(0)==111&&_C.charCodeAt(1)==110)_C=_C.slice(2);return(_C.charCodeAt(_C.length-1)==41&&_a.VirtualEvent?_a.VirtualEvent.resolve(_C):_C);}function _D(_E,_F){for(
var _G= -1,_w={},_H=Math.min(_E.length,_F.length);++_G<_H;)_w[_E[_G]]=_F[_G];return _w;}var _I=_a._I={},_J={},_K=0,_L={string:1,number:1,boolean:1},_t={clientX:0,clientY:0,pageX:0,pageY:0};var _M='table-',_N=_M+'row',_O=_M+'cell',_P=_q({SPAN:'inline',THEAD:_M+'header-group',TFOOT:_M+'footer-group',LI:'list-item'},_k&&typeof DOMImplementation=='undefined'?_g:{TABLE:'table',TR:_N,TH:_O,TD:_O,TBODY:_N+'-group',COLGROUP:_M+'column-group',COL:_M+'column',CAPTION:_M+'caption'});_a.display=function(_Q,_R){_R=_R===_b|| !!_R;_S(_Q,function(_T){_T.style.display=_R?(_P[_T.tagName]||'block'):'none';});};var _S=_a.doForAll=function(_Q,_z,_U,_V){if(typeof _Q==_c)_Q=_W(_Q,_U,_V);if(_Q!=_b){if(_X(_Q)){_z(_Q);}else{var _Y=typeof _Q;if((_Y=='object'||_Y==_d)&&typeof _Q.length=='number'){for(var _Z= -1,_0=_Q.length;++_Z<_0;)_S(_Q[_Z],_z,_U,_V);}else if(_Y=='object'){for(var _1 in _Q)_S(_Q[_1],_z,_U,_V);}}}};var _2=_a.doRectanglesOverlap=function(_3,_4,_5,_6,_7,_8,_9,_ba){return(_5-1+ +_3>=_7&&_9-1+ +_7>=_3&&
_6-1+ +_4>=_8&&_ba-1+ +_8>=_4);};var _W=_a.getById=function(_T,_U,_V){if(typeof _T!=_c)return _T;var _w=_V?_V[_T]:_b;if(_w===_b){var _bb=_bc(_U,_T);(_w=_u(_bb))||(((_w=document.getElementsByName(_bb)).length<2)&&(_w=_w[0]||_g));if(_V)_V[_T]=_w;}return _w;};_a.find=function(_bd){if(typeof _bd!='object'|| !_bd||typeof _bd.length=='number'||_X(_bd))return _bd;var _be=document,_bf=[],_bg=_q({},_bd),_bh='root'in _bg?_W(_bg.root):_be;delete _bg.root;if(_bh){var _bi=_bg.tagName;if('id'in _bg&&_L[typeof _bg.id]){var _T=_u(_bg.id);_T&&_bf.push(_T);delete _bg.id;}else if('name'in _bg&&_L[typeof _bg.name]){_bf=_be.getElementsByName(_bg.name);delete _bg.name;}else{var _bj=_L[typeof _bi];_bj&&delete _bg.tagName;_bf=_bh.getElementsByTagName(_bi&&_bj?_bi:'*');_bh=_g;}if(_bh==_be)_bh=_g;if(!_bi||_bi=='*')delete _bg.tagName;}var _bk=_bf.length;for(var _bl in _bg)break;if(!_bk||(_bl==_b&& !_bh))return _bf;var _bm=[],_bn;for(var _bo= -1;++_bo<_bk;){var _T=_bf[_bo];if(_bn=_bh?_bp(_T,_bh):_e){for(var _bq in _bg){var _br=_T[_bq],
_bs=_bg[_bq],_bt=typeof _bs;if(!(_L[_bt]?_br==_bs:(_bs instanceof RegExp?_bs.test(_br||''):(_bt==_d?_bs.call(_T,_br):_e)))){_bn=_f;break;}}}_bn&&_bm.push(_T);}return _bm;};var _bu=_a.getCoords=function(_T){var _bv=0,_bw=0,_bx=0,_by=0,_bz=_e,_bA=_x(),_bB=_bC(window);function _bD(){_bv+=_bA.scrollLeft;_bw+=_bA.scrollTop;}if(_T==window){_bD();_bx=_bB.width;_by=_bB.height;}else if(_X(_T=_W(_T))){_bx=_T.offsetWidth;_by=_T.offsetHeight;if(!(_bx&&_by)&&_T.tagName=='DIV'){for(var _bE=_T.childNodes,_bF=_bE.length;--_bF>=0;){if(_bE[_bF].nodeName.charAt(0)!='#'){var _bG=_bu(_bE[_bF]);if(_bG.width||_bG.height){_bx=Math.max(_bx,_bG.right-_bv+1);_by=Math.max(_by,_bG.bottom-_bw+1);}}}}function _bH(_T){return _bI(_T,'display')=='none'||_bI(_T,'visibility')==_p;}if(_T.tagName=='A'&&_T.childNodes.length==1&&_T.childNodes[0].tagName=='IMG')_T=_T.childNodes[0];var _bJ=_bz= !_bH(_T),_bK=_T,_bL=_T;while(_bL.parentNode&&typeof _bL.parentNode!='unknown'){var _bM=_bL.offsetLeft||0,_bN=_bL.offsetTop||0,_bO=_bL.offsetWidth,
_bP=_bL.offsetHeight;if(_bz&&_bH(_bL))_bz=_f;if(_bL==_bK){_bv+=_bM+(parseInt(_bI(_bL,'borderLeftWidth'))||0);_bw+=_bN+(parseInt(_bI(_bL,'borderTopWidth'))||0);_bK=_bL.offsetParent;_bI(_bL,'position')=='fixed'&&_bD();}if(_bL!=_T&&_bL!=document.body&&_bL!=document.documentElement&&(_bL.scrollWidth>_bO||_bL.scrollHeight>_bP)){_bv-=_bL.scrollLeft;_bw-=_bL.scrollTop;if(_k){_bv+=_bL.clientLeft;_bw+=_bL.clientTop;}if(_bz)_bz=_2(_bv,_bw,_bx,_by,_bM,_bN,_bO,_bP);}_bL=_bL.parentNode;}if(_bz)_bz=_2(_bv,_bw,_bx,_by,_bA.scrollLeft,_bA.scrollTop,_bB.width,_bB.height);}return{x:_bv,y:_bw,width:_bx,height:_by,area:_bx*_by,left:_bv,top:_bw,right:_bv+_bx-1,bottom:_bw+_by-1,seen:_bz};};var _bC=_a.getDimensions=function(_T){if(_T==window){var _bA=document.documentElement;return{width:_bA.clientWidth||window.innerWidth||_bA.offsetWidth,height:_bA.clientHeight||window.innerHeight||_bA.offsetHeight};}else if(_T=_W(_T)){return{width:_T.offsetWidth||parseInt(_bI(_T,'width'))||0,height:_T.offsetHeight||parseInt(_bI(_T,'height'))||0};
}else{return{width:0,height:0};}};var _bQ={borderColor:['border','Color'],borderWidth:['border','Width'],padding:1,margin:1},_bI=_a.getStyle=function(_T,_bR){var _bS='';if(typeof _bR==_c){if(_T){var _bT=_k&&_bR=='opacity',_bU=document.defaultView,_bV=_bU&&_bU.getComputedStyle(_T,'');if(_bT)_bR='filter';if(_bV){if(!(_bS=_bV[_bR])){var _bW=_bQ[_bR];if(_bW){var _bX=_bW[0]||_bR,_bY=_bW[1]||'',_bZ=_bV[_bX+'Top'+_bY],_b0=_bV[_bX+'Right'+_bY],_b1=_bV[_bX+'Bottom'+_bY],_b2=_bV[_bX+'Left'+_bY];_bS=_bZ==_b0&&_b0==_b1&&_b1==_b2?_b2:_bZ+' '+_b0+' '+_b1+' '+_b2;}}}else{var _b3=_T.currentStyle;_bS=_b3?_b3.getAttribute(_bR):_T.style[_bR];}if(_bT){var _b4=_bS.match(/alpha\s*\(\s*opacity\s*=([^\)]*)\)/i);_bS=_b4?_b4[1]/100:1;}}}else{_bS={};if(_T)for(_bR in _bR)_bS[_bR]=_bI(_T,_bR);}return _bS;};var _b5=_a.getText=function(_T){var _b6='';if(_T=_W(_T)){function _b7(_T){if(typeof _T.innerText==_c){_b6+=_T.innerText.replace(/\r|\n|\r\n/g,'');}else if(typeof _T.textContent==_c){_b6+=_T.textContent;}else{
if(_T.nodeType==3)_b6+=_T.data;if(_T.childNodes){for(var _bF= -1,_bE=_T.childNodes,_b8=_bE.length;++_bF<_b8;)_b5(_bE[_bF]);}}}_b7(_T);}return _b6;};_a.getValue=function(_T){var _bS;if(_T=_W(_T)){if(_X(_T)){var _b9=_T.tagName;if(_b9=='TEXTAREA'){_bS=_T.value;}else if(_b9=='INPUT'){_bS=_T.type=='checkbox'?_T.checked:_T.value;}else if(_b9=='SELECT'){if(_T.multiple){_bS=[];for(var _ca= -1,_cb=_T.options,_cc=_cb.length,_cd;++_ca<_cc;)(_cd=_cb[_ca]).selected&&_bS.push(_cd.value);}else{_bS=_T.value;}}else if(_b9=='IMG'){_bS=_T.src;}else{_bS=_T.innerHTML.replace(/<br\/?>/gi,'\n').replace(/&nbsp;/g,' ');}}else{_bS=(Uize.findRecord(_T,{tagName:'INPUT',type:'radio',checked:_e})||{}).value;}}return _bS;};_a.injectHtml=function(_Q,_ce,_cf){var _cg,_ch,_ci,_cj,_ck,_cl;((_cg=_cf=='inner replace')||(_ch=_cf=='outer replace')||(_ci=_cf=='inner top')||(_cj=_cf=='outer top')||(_ck=_cf=='outer bottom')||(_cl=_e));_ce+='';_S(_Q,function(_T){var _cm=_T.childNodes;function _cn(_co){return _co&&/<script/i.test(_co);}function _cp(){
return _cn(_ce);}if((_cg||(!_cm.length&&(_ci||_cl)))&& !_cp()){_T.innerHTML=_ce;}else if(_ch&&_k&& !_cp()){_T.outerHTML=_ce;}else{if(_cg)_T.innerHTML='';var _cq=document.createElement('DIV');_cq.innerHTML=_ce;var _cr=_ci?_cm[0]:_ck?_T.nextSibling:_T,_cs=_cq.childNodes,_ct=_T.parentNode;function _cu(_T){if(_T.tagName=='SCRIPT'){var _cv=document.createElement('script');if(_T.id)_cv.id=_T.id;if(_T.type)_cv.type=_T.type;_cv.text=_T.text;if(_T.src)_cv.src=_T.src;_T.parentNode.replaceChild(_cv,_T);}else if(_cn(_T.innerHTML)){for(var _bF= -1,_cm=_T.childNodes,_cw=_cm.length;++_bF<_cw;)_cu(_cm[_bF]);}}while(_cs.length){var _cx=_cs[0];if(_cl||_cg){_T.appendChild(_cx);}else if(_ci){_cr?_T.insertBefore(_cx,_cr):_T.appendChild(_cx);}else if(_cj||_ch){_ct.insertBefore(_cx,_cr);}else if(_ck){_cr?_ct.insertBefore(_cx,_cr):_ct.appendChild(_cx);}_cu(_cx);}_ch&&_ct.removeChild(_T);}});};var _X=_a.isNode=function(_T){return!!(_T&&typeof _T=='object'&&(_T.getAttribute||_T.documentElement||(_T.self&&_T.self==_T)));};
var _bp=_a.isOnNodeTree=function(_T,_cy){_T=_W(_T);_cy=_W(_cy);while(_T){if(_T==_cy)return _e;_T=_T.parentNode;}return _f;};var _bc=_a.joinIdPrefixAndNodeId=function(_U,_v){return(_U||'')+(_U&&_v?'-':'')+_v;};_a.remove=function(_Q){_S(_Q,function(_T){_T.parentNode.removeChild(_T)});};_a.setClipRect=function(_Q,_bZ,_b0,_b1,_b2){var _cz='rect('+_bZ+'px, '+_b0+'px, '+_b1+'px, '+_b2+'px)';_S(_Q,function(_T){_T.style.clip=_cz});};var _cA=['left','top','width','height'];_a.setCoords=function(_Q,_cB){_cC(_Q,typeof _cB.length=='number'?_D(_cA,_cB):_cB);};_a.centerInWindow=function(_Q){var _cD=_bu(window);_S(_Q,function(_T){var _cE=_bC(_T);_a.setCoords(_T,{left:_cD.x+((_cD.width-_cE.width)>>1),top:_cD.y+((_cD.height-_cE.height)>>1)});});};_a.getEventAbsPos=function(_cF){var _cG=(_cF||(_cF=_t)).targetTouches;if(_cG&&_cG.length)_cF=_cG[0];if(_cF.pageX!=_b){return{left:_cF.pageX,top:_cF.pageY};}else{var _bA=_x();return{left:_cF.clientX+_bA.scrollLeft,top:_cF.clientY+_bA.scrollTop};}};
var _cH=_a.setAbsPos=function(_Q,_cI,_cJ){_cJ=typeof _cJ=='number'?{x:_cJ,y:_cJ}:(_cJ||{x:0,y:0});var _bA=document[_l?'body':'documentElement'],_cK=_bC(window);_S(_Q,function(_T){function _cL(_cM,_cN,_cO,_cP){var _cQ=_cI[_cM],_cR=_cJ[_cP],_cS=_cQ-_bA[_cN],_cT=_cR+_cE[_cO];return(_cQ+(_cS+_cT>_cK[_cO]?Math.max(-_cT,-_cS):_cR));}var _cE=_bC(_T);_cC(_T,{left:_cL('left','scrollLeft','width','x'),top:_cL('top','scrollTop','height','y'),right:'auto',bottom:'auto'});});};_a.setAbsPosAdjacentTo=function(_Q,_cU,_cV){_cU=_W(_cU);var _cW=_bu(_cU),_cX=_cW.width/2,_cY=_cW.height/2,_cZ=_cV=='x'? -1:1;if(!_cX&& !_cY)_cW=_a.getEventAbsPos();_S(_Q,function(_T){_cH(_T,{left:_cW.left+_cX,top:_cW.top+_cY},{x:-_cX*_cZ,y:_cY*_cZ});});};_a.setInnerHtml=function(_Q,_co){_co+='';_S(_Q,function(_T){_T.innerHTML=_co});};var _c0={};_a.setOpacity=function(_Q,_c1){_c0.opacity=_c1;_cC(_Q,_c0);};_a.setProperties=function(_Q,_bd){_S(_Q,function(_T){_q(_T,_bd)});};var _cC=_a.setStyle=function(_Q,_bd){_S(_Q,function(_T){var _c2=_T.style,_c3;
if(_k&&'opacity'in _bd)_c2.filter=(_c3=Math.round(_bd.opacity*100))<100?'alpha(opacity='+_c3+')':'';for(var _bR in _bd)_c2[_bR]=(typeof(_c3=_bd[_bR])=='object'&&_c3?(_c3=_c3.valueOf()):_c3)!=_b?(typeof _c3=='number'&&_bR!='opacity'&&_bR!='zIndex'?Math.round(_c3)+'px':_c3+''):'';});};_a.setValue=function(_Q,_bS){_bS+='';_S(_Q,function(_T){var _b9=_T.tagName,_c4=_T.readOnly;if(_c4)_T.readOnly=_f;if(_b9=='TEXTAREA'){_T.value=_bS;}else if(_b9=='INPUT'){var _c5=_T.type;if(_c5=='text'||_c5==_p||_c5=='password'){_T.value=_bS;}else if(_c5=='checkbox'){_T.checked=_bS=='true';}else if(_c5=='radio'){_T.checked=_T.value==_bS;}}else if(_b9=='SELECT'){if(!_bS){_T.selectedIndex= -1;}else{var _cb=_T.options;if(_T.multiple&&(_bS=='*'||_bS.indexOf(',')> -1)){var _c6;if(_bS!='*'){_c6={};for(var _F=_bS.split(','),_G=_F.length;--_G>=0;)_c6[_F[_G]]=1;}for(var _ca=_cb.length,_cd;--_ca>=0;)(_cd=_cb[_ca]).selected= !_c6||_c6[_cd.value];}else{_T.selectedIndex=Uize.findRecordNo(_cb,{value:_bS},_T.selectedIndex);}}}else if(_b9=='IMG'){
if(_bS)_T.src=_bS;}else{_b9=='PRE'&&_k?(_T.innerText=_bS):(_T.innerHTML=_bS.replace(/</g,'&lt;').replace(/\n/g,'<br/>'));}if(_c4)_T.readOnly=_c4;});};_a.show=function(_Q,_c7){_cC(_Q,{visibility:_c7||_c7===_b?'inherit':_p});};_a.showClickable=function(_Q,_c8){_cC(_Q,{cursor:_c8||_c8===_b?(_k?'hand':'pointer'):'default'});};var _c9=_a.unwire=function(_Q,_da,_db,_dc){if(typeof _da=='object'&&_da&& !_da.virtualDomEvent){for(var _C in _da)_c9(_Q,_C,_da[_C],_db);}else{_a.unwireEventsByOwnerId(_dc,_Q!==_b||_da!=_b||_db!=_b?{node:_Q,eventName:_da,handler:_db}:_b);}};_a.unwireEventsByOwnerId=function(_dd,_de){var _df=_J[_dd=_dd||''];if(_df){function _dg(_dh){if(_dh!==_g){var _di=_de&&_de.eventName,_dj=_de&&_de.handler,_dk=_dh||_di||_dj;if(_di&&_di.charCodeAt)_di=_B(_di);for(var _dl=_df.length;--_dl>=0;){var _dm=_df[_dl],_dn=_I[_dm],_T=_dn._T,_C=_dn._C;if(!_dk||((!_dh||_dh==(_dn._do||_T))&&(!_di||_di==_C)&&(!_dj||_dj==_dn._dp))){_dk&&_df.splice(_dl,1);if(_dn._dq){_a.unwireEventsByOwnerId(_dn._dq)}else{try{_T==window
?_dr.unwire(_C,_dn._ds):_k?_T.detachEvent('on'+_C,_dn._ds):_T.removeEventListener(_C,_dn._ds,_f);}catch(_dt){}}delete _I[_dm];}}(_dk&&_df.length)||delete _J[_dd];}}_de&&_de.node!==_b?_S(_de.node,_dg):_dg();}};var _du=_y(function(_dm){return(function(_s){var _dn=window.Uize&&Uize.Node._I[_dm];return _dn&&_dn._dp.call(_dn._T,_s.windowEvent);});}),_dv=_y(function(_dm){return(function(_s){var _dn=window.Uize&&Uize.Node._I[_dm];return _dn&&_dn._dp.call(_dn._T,_s||window.event);});}),_dw={click:_dv,mouseover:_y(function(_dm){return(function(_s){var _dn=window.Uize&&Uize.Node._I[_dm],_dx=(_s||(_s=window.event)).fromElement||_s.relatedTarget;if(_dn){if(_dx){try{if(!_dx.Uize_Widget_Drag_shield&& !Uize.Node.isOnNodeTree(_dx,_dn._T))_dx=null;}catch(_dt){_dx=null;}}if(!_dx){Uize.Node._r(_s);return _dn._dp.call(_dn._T,_s);}}});}),mouseout:_y(function(_dm){return(function(_s){var _dn=window.Uize&&Uize.Node._I[_dm],_dy=(_s||(_s=window.event)).toElement||_s.relatedTarget;if(_dn){if(_dy){try{
if(!_dy.Uize_Widget_Drag_shield&& !Uize.Node.isOnNodeTree(_dy,_dn._T))_dy=null;}catch(_dt){_dy=null;}}if(!_dy)return _dn._dp.call(_dn._T,_s);}});}),mousedown:_dv,mouseup:_dv};_a.wireEvent=_a.wireEvents=_a.wire=function(_Q,_C,_dp,_dd){if(!_C)return;if(_dd==_b)_dd='';var _dz;if(_C.charCodeAt)_C=_B(_C);if(typeof _C=='object'&& !(_dz= !!_C.virtualDomEvent)){_dd=arguments[2]||'';for(var _s in _C)_a.wire(_Q,_s,_C[_s],_dd);return;}_S(_Q,function(_T){var _b9=_T.tagName;(_J[_dd]||(_J[_dd]=[])).push(_K);var _ds=(_dz?_a.returnFalse:_T==window?_du:_dw[_C]||_dv)(_K);var _dn=_I[_K++]={_T:_T,_C:_C,_dp:_dp,_ds:_ds};if(_o&&_b9=='BODY'&&_C=='scroll'){_dn._do=_T;_T=_dn._T=document;}if(_ds){var _dA='on'+_C;_T==window?_dr.wire(_C,_ds):_k?_T.attachEvent(_dA,_ds):_T.addEventListener(_C,_ds,_f);if(_b9=='A'&&(_C=='mousedown'||_C=='click')&& !_T[_dA])_T[_dA]=_a.returnFalse;}else if(_dz){_C.wire(_T,_dp,_dn._dq=Uize.getGuid());}});};_a.returnFalse=new Function('return false');_a.returnTrue=new Function('return true');_a.isIe=_k;
_a.isSafari=_l;_a.isMozilla=_m;if(_h){_a.wire(document.documentElement,'mousemove',_r);var _dr=new Uize,_dB=setTimeout(function(){_dr.fire('load')},15000);function _dC(_dD){var _dE='on'+_dD,_dF=window[_dE]||_a.returnFalse;window[_dE]=function(_s){_dD=='load'&&clearTimeout(_dB);_dF.call(window,_s||(_s=window.event));_dr.fire({name:_dD,windowEvent:_s});};}for(var _dD in{focus:1,blur:1,load:1,beforeunload:1,unload:1,resize:1,scroll:1})_dC(_dD);;}return _a;}});